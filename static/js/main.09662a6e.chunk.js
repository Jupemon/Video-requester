(this["webpackJsonpvideo-requester"]=this["webpackJsonpvideo-requester"]||[]).push([[0],{54:function(e,t,a){e.exports=a(75)},60:function(e,t,a){},62:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(26),l=a.n(o),s=(a(59),a(60),a(48)),c=a(11),i=a(6),u=a(7),d=a(9),p=a(8),m=a(10),f=a(79),h=a(12),E=a.n(h),v=a(17),g=a(40),b=function(e){return r.a.createElement(g.GoogleLogin,{disabled:e.isLoading,clientId:"98482845921-f04ihoooddtbgl0fjapqc782bo3s6kdp.apps.googleusercontent.com",buttonText:e.isLoading?"Loading...":"Login",onSuccess:function(t){e.logIn(t)},onFailure:function(t){e.logInFailure(t)},cookiePolicy:"single_host_origin"})},y=(a(62),a(80)),O=a(81),j=a(82),q=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!1,errorMessage:"",data:!1},a.fetchData=function(){var e=Object(v.a)(E.a.mark((function e(t){var n,r,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoading:!0}),n=t.tokenId,e.next=4,fetch("".concat("https://requstenator-server.herokuapp.com","/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token_id:n})});case 4:if(200!==(r=e.sent).status&&201!==r.status){e.next=13;break}return e.next=8,r.json();case 8:o=e.sent,window.localStorage.setItem("token_id",n),a.props.loadProfile(o),e.next=14;break;case 13:a.setState({errorMessage:"Couldn't sign in"});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.logInFailure=function(e){console.log(e,"ERROR")},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.errorMessage,a=e.isLoading,n=e.data;return console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/video-requester",REACT_APP_CLIENT_ID:"98482845921-f04ihoooddtbgl0fjapqc782bo3s6kdp.apps.googleusercontent.com",REACT_APP_PUBLIC_KEY:"pk_test_DOEkIFRqbKXBqWg0ykobHYQP00nEaxN5cb",REACT_APP_SERVER_URL:"https://requstenator-server.herokuapp.com",REACT_APP_STRIPE_CLIENT_ID:"ca_GwaRKUrsZ7EmttRGiaV1lei21MlM5Vpz"}).REACT_APP_SECRET_NAME,"TESTING ENV VARIABLE"),n?n?r.a.createElement("div",null):void 0:r.a.createElement("div",{className:"Content"},r.a.createElement(f.a,null,r.a.createElement(y.a,null,r.a.createElement("h1",{style:{fontSize:"85px"},className:"display-4"},"Requestnium"),r.a.createElement("p",{className:"lead"},"Allows youtubers to get video requests and sell custom video content"),r.a.createElement("hr",{className:"my-4"}),r.a.createElement(b,{isLoading:a,logInFailure:this.logInFailure,logIn:this.fetchData}),r.a.createElement("p",{style:{color:"red"}},t)),r.a.createElement(O.a,null,r.a.createElement(j.a,null,r.a.createElement("div",{className:"box-1"},r.a.createElement("i",{style:{marginBottom:"25px"},className:"fas fa-user-plus fa-4x"}),r.a.createElement("h1",{className:"display-4"},"1. Sign in"),r.a.createElement("p",{className:"lead"},"Setup your account by signing in with your youtube/google account"))),r.a.createElement(j.a,null,r.a.createElement("div",{className:"box-2"},r.a.createElement("i",{style:{marginBottom:"25px"},className:"fas fa-upload fa-4x"}),r.a.createElement("h1",{className:"display-4"},"2. Setup your account"),r.a.createElement("p",{className:"lead"},"Setup your account and start accepting custom video requests"))),r.a.createElement(j.a,null,r.a.createElement("div",{className:"box-3"},r.a.createElement("i",{style:{marginBottom:"25px"},className:"fas fa-dollar-sign fa-4x"}),r.a.createElement("h1",{className:"display-4"},"3. Gain revenue"),r.a.createElement("p",{className:"lead"},"Fullfill custom video requests and gain revenue"))))))}}]),t}(n.Component),k=a(83),w=a(84),I=a(87),x=a(51),S=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).editPrice=function(){var e=Object(v.a)(E.a.mark((function e(t){var n,r,o,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://requstenator-server.herokuapp.com","/editprice"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:if(201!==(n=e.sent).status){e.next=9;break}return e.next=6,n.json();case 6:r=e.sent,o=r.video_price,l=r.currency,a.setState({video_price:o,currency:l});case 9:a.setState({loading:!1});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleClick=function(){a.setState({loading:!0});a.state.inputPrice;var e=a.props.user_id,t={token_id:window.localStorage.getItem("token_id"),updatedPrice:Number.parseInt(a.state.inputPrice),user_id:e};a.editPrice(t)};var n=a.props,r=n.video_price,o=n.currency;return a.state={inputPrice:r,loading:!1,video_price:r,currency:o},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.inputPrice,n=t.video_price,o=t.currency,l=t.loading;return r.a.createElement("div",null,r.a.createElement("p",null,"the price for leaving a custom video request is currently : ",r.a.createElement("b",null,n," ",o)),r.a.createElement(k.a,{disabled:l,title:l?"Loading..":"Edit Price",id:"bg-nested-dropdown"},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(w.a,{className:"mb-3"},r.a.createElement(I.a,{type:"number",min:"0",onChange:function(t){e.setState({inputPrice:t.target.value})},value:a,"aria-label":"Default","aria-describedby":"inputGroup-sizing-default"}),r.a.createElement(w.a.Prepend,null,r.a.createElement(w.a.Text,{id:"basic-addon1"},o.toUpperCase()))),r.a.createElement(x.a.Item,{onClick:function(){e.handleClick()},eventKey:"1"},"Save"))))}}]),t}(n.Component),D=a(47),P=(a(68),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onboarding_completed,a=e.google_consent,n=e.token_id;return t?a?null:r.a.createElement("div",{className:"setup-profile"},r.a.createElement(y.a,null,r.a.createElement("h1",null,"Google consent"),r.a.createElement("p",null,"Click The button to give consent to the application access to your youtube account."),r.a.createElement("p",null,r.a.createElement(D.a,{href:"".concat("https://requstenator-server.herokuapp.com","/handle-consent/").concat(n),variant:"primary"},"Google Consent")))):r.a.createElement("div",{className:"setup-profile"},r.a.createElement(y.a,null,r.a.createElement("h1",null,"Integrade stripe"),r.a.createElement("p",null,"Follow the instructions given here to create a stripe onboarding account, this will allow you to collect payments from you viewers"),r.a.createElement("p",null,r.a.createElement(D.a,{href:"".concat("https://requstenator-server.herokuapp.com","/handle-onboarding/").concat(n),variant:"primary"},"Integrade stripe"))))}}]),t}(n.Component)),_=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.profile,t=e.channel_name,a=e.user_id,n=e.onboarding_completed,o=e.google_consent,l=e.video_price,s=e.currency,c=window.localStorage.getItem("token_id");return console.log("PROOOOOOPS",this.props.profile),n&&o?r.a.createElement(y.a,null,r.a.createElement("h1",null,"Hello, ",t),r.a.createElement("hr",null),r.a.createElement("p",null,"People can now request custom youtube videos from you using this shareable link : ",r.a.createElement("a",{href:"http://localhost:3000/viewprofile/".concat(a)},"http://localhost:3000/viewprofile/".concat(a))),r.a.createElement(S,{video_price:l,user_id:a,currency:s})):r.a.createElement(P,{onboarding_completed:n,google_consent:o,token_id:c})}}]),t}(n.Component),N=a(85),T=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={infoMessage:"",loading:!1,requester:"",title:"",description:""},a.sendVideoRequest=function(){var e=Object(v.a)(E.a.mark((function e(t){var n,r,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://requstenator-server.herokuapp.com","/handle-checkout"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:if(n=e.sent,a.clearInput(),201!==n.status){e.next=13;break}return e.next=8,n.json();case 8:o=e.sent,a.setState({loading:!1,infoMessage:"New videorequest added"}),a.props.updateVideoRequests(o),e.next=22;break;case 13:if(200!==n.status){e.next=21;break}return e.next=16,n.json();case 16:r=e.sent,window.Stripe("pk_test_DOEkIFRqbKXBqWg0ykobHYQP00nEaxN5cb").redirectToCheckout({sessionId:r}),e.next=22;break;case 21:throw"Fetch failed";case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(0),console.log(e.t0,"ERROR HERE"),a.setState({loading:!1,infoMessage:"Something went wrong"});case 28:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(t){return e.apply(this,arguments)}}(),a.clearInput=function(){a.setState({requester:"",title:"",description:""})},a.validateInput=function(){var e=a.state,t=e.title,n=e.description;return t.length>0&&n.length>0},a.handleClick=function(){var e=a.props.userId,t=a.state,n=t.title,r=t.description,o=t.requester;if(a.validateInput()){var l={requester:o,title:n,description:r,user_id:Number.parseInt(e)};a.setState({loading:!0}),a.sendVideoRequest(l)}else a.setState({infoMessage:"Invalid input"})},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.videoPrice,n=t.currency,o=t.channel_name,l=this.state,s=l.loading,c=l.title,i=l.description,u=l.requester,d=l.infoMessage;return r.a.createElement(y.a,null,r.a.createElement(O.a,null,r.a.createElement(j.a,null,r.a.createElement("h1",null,"Request a custom video :"),r.a.createElement("p",null,"You can support ",r.a.createElement("b",null,o)," by requesting a custom youtube video from him for ",r.a.createElement("b",null,a," ",n))),r.a.createElement(j.a,null,r.a.createElement(w.a,{className:"mb-3"},r.a.createElement(w.a.Append,null,r.a.createElement(w.a.Text,{id:"basic-addon2"},"Requester")),r.a.createElement("input",{type:"text",placeholder:"Enter your name/username",disabled:s,onChange:function(t){e.setState({requester:t.target.value})},value:u,maxLength:"25"})),r.a.createElement(w.a,{className:"mb-3"},r.a.createElement(w.a.Append,null,r.a.createElement(w.a.Text,{id:"basic-addon2"},"Title")),r.a.createElement("input",{type:"text",placeholder:"Title for your request",disabled:s,onChange:function(t){e.setState({title:t.target.value})},value:c,maxLength:"25"})),r.a.createElement(w.a,null,r.a.createElement(w.a.Prepend,null,r.a.createElement(w.a.Text,null,"Description")),r.a.createElement("textarea",{style:{height:"300px"},placeholder:"Describe the custom video you would like..",type:"textarea",disabled:s,onChange:function(t){e.setState({description:t.target.value})},value:i,maxLength:"250"})),r.a.createElement(w.a,null,r.a.createElement(w.a.Prepend,null,r.a.createElement(D.a,{onClick:function(){e.handleClick()},disabled:s,variant:"outline-secondary"},s?r.a.createElement(N.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")):"Request"),r.a.createElement("p",null,d))))))}}]),t}(n.Component),R=a(86),C=(a(69),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={},a.loadPlayer=function(){a.setState({loading:!1});var e=a.props,t=e.videoId,n=e.requestId;a.player=new window.YT.Player("youtube-player-".concat(n),{height:"390",width:"390",videoId:t,events:{onReady:a.onPlayerReady}})},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.loadPlayer()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{id:"youtube-player-".concat(this.props.requestId)}))}}]),t}(n.Component)),L=(a(70),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={error:!1},a.validateFile=function(e){return-1!==["VIDEO/MOV","VIDEO/MPEG4","VIDEO/MP4","VIDEO/AVI","VIDEO/WMV","VIDEO/MPEGPS","VIDEO/FLV"].indexOf(e.type.toUpperCase())},a.dragOver=function(e){e.preventDefault()},a.dragEnter=function(e){e.preventDefault()},a.dragLeave=function(e){e.preventDefault()},a.fileError=function(){console.log("FAILED UPLOAD"),a.setState({error:"Not valid file"})},a.fileDrop=function(e){var t=a.props.handleFileUpload;e.preventDefault();var n=e.dataTransfer.files[0];console.log(n),a.validateFile(n)?t(n):a.fileError()},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state.error;return r.a.createElement("div",{className:"dropzone-container"},r.a.createElement("div",{className:"dropzone-drop-container",onDragOver:this.dragOver,onDragEnter:this.dragEnter,onDragLeave:this.dragLeave,onDrop:this.fileDrop},r.a.createElement("div",{className:"dropzone-drop-message"},r.a.createElement("div",{className:"dropzone-upload-icon"}),e||"Drag & Drop video file here")))}}]),t}(n.Component)),A=(a(71),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!1},a.rejectRequest=function(){var e=Object(v.a)(E.a.mark((function e(t,n){var r,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0}),e.next=3,fetch("".concat("https://requstenator-server.herokuapp.com","/rejectvideorequest"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token_id:t,requestId:n})});case 3:if(200!==(r=e.sent).status){e.next=14;break}return e.next=7,r.json();case 7:o=e.sent,console.log(o,"DUAPT"),a.props.updateVideoRequests(o),a.props.updateRequestStatus("rejected"),a.setState({loading:!1}),e.next=15;break;case 14:a.setState({loading:!1,error:"Failed to update"});case 15:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),a.handleReject=function(){var e=window.localStorage.getItem("token_id"),t=a.props.requestId;a.rejectRequest(e,t)},a.fulfillRequest=function(){var e=Object(v.a)(E.a.mark((function e(t){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0}),e.next=3,fetch("".concat("https://requstenator-server.herokuapp.com","/fulfillvideorequest"),{method:"POST",body:t});case 3:if(200!==(n=e.sent).status){e.next=13;break}return e.next=7,n.json();case 7:r=e.sent,a.props.updateVideoRequests(r),a.props.updateRequestStatus("uploading"),a.setState({loading:!1}),e.next=14;break;case 13:a.setState({input:"",placeHolder:"Something went wrong",loading:!1});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleFileUpload=function(e){var t=a.props.requestId,n=window.localStorage.getItem("token_id"),r=new FormData;r.append("video",e),r.append("requestId",t),r.append("token_id",n),a.fulfillRequest(r)},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return this.state.loading?r.a.createElement("div",null,r.a.createElement(N.a,{className:"handle-request-spinner",animation:"border"})):r.a.createElement("div",null,r.a.createElement(D.a,{onClick:function(){e.handleReject()},className:"reject-request",variant:"danger"},"Reject"),r.a.createElement(L,{handleFileUpload:this.handleFileUpload}))}}]),t}(n.Component)),V=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).updateRequestStatus=function(e){a.setState({status:e})};var n=a.props.data,r=n.status,o=n.video;return a.state={status:r,videoId:o},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.data,t=e.title,a=e.description,n=e.requester,o=e.request_id,l=this.props.viewOnly,s=this.state,c=s.status,i=s.videoId;return"pending"===c||"failed"===c?r.a.createElement(R.a,{bg:"warning"},r.a.createElement(R.a.Body,null,r.a.createElement("div",{className:"status"},c.toUpperCase()),r.a.createElement(R.a.Text,null,"From : ",n),r.a.createElement(R.a.Title,{className:"title"},t),r.a.createElement(R.a.Text,{className:"description"},a),l?null:r.a.createElement(A,{updateRequestStatus:this.updateRequestStatus,updateVideoRequests:this.props.updateVideoRequests,requestId:o}))):"rejected"===c?r.a.createElement(R.a,{bg:"danger"},r.a.createElement(R.a.Body,null,r.a.createElement("div",{className:"status"},c.toUpperCase()),r.a.createElement(R.a.Text,null,"From : ",n),r.a.createElement(R.a.Title,{className:"title"},t),r.a.createElement(R.a.Text,{className:"description"},a))):"fulfilled"===c?r.a.createElement(R.a,{bg:"success"},r.a.createElement(R.a.Body,null,r.a.createElement("div",{className:"status"},c.toUpperCase()),r.a.createElement(C,{requestId:o,videoId:i}))):"uploading"===c?r.a.createElement(R.a,{bg:"info"},r.a.createElement(R.a.Body,null,r.a.createElement("div",{className:"status"},c.toUpperCase()),r.a.createElement(C,{requestId:o,videoId:i}))):void 0}}]),t}(n.Component),F=function(e){var t=e.status,a=t.pending,n=t.fulfilled,o=t.rejected,l=t.uploading,s=t.failed,c=t.total;return r.a.createElement(R.a,{style:{width:"25rem"}},r.a.createElement(R.a.Body,null,r.a.createElement(R.a.Title,null,"Videorequests"),r.a.createElement(R.a.Text,null,"TOTAL ".concat(c," / ").concat(10)),r.a.createElement(R.a.Text,null,"PENDING ".concat(a)),r.a.createElement(R.a.Text,null,"FULFILLED ".concat(n)),r.a.createElement(R.a.Text,null,"REJECTED ".concat(o)),r.a.createElement(R.a.Text,null,"UPLOADING ".concat(l)),r.a.createElement(R.a.Text,null,"FAILED ".concat(s))))},U=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).youtubeLoaded=function(){a.setState({youtubeLoaded:!0})},a.updateVideoRequests=function(e){console.log("UPDATING"),console.log(e);var t=e.status,n=e.requests;a.setState({status:t,requests:n})},a.loadYoutubeScripts=function(){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),window.onYouTubeIframeAPIReady=a.youtubeLoaded};var n=a.props.profileData,r=n.requests,o=n.status;return a.state={youtubeLoaded:!1,status:o,requests:r},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){void 0===window.YT&&this.loadYoutubeScripts()}},{key:"render",value:function(){var e=this,t=this.state,a=t.youtubeLoaded,n=t.status,o=t.requests;if(a){var l=this.props.viewOnly;console.log(this.props.profileData,"WITNESS ME");var s=this.props.profileData,c=s.video_price,i=s.currency,u=s.channel_name,d=s.user_id;return r.a.createElement(f.a,null,l?r.a.createElement(O.a,null,r.a.createElement(j.a,null,r.a.createElement(T,{updateVideoRequests:this.updateVideoRequests,userId:d,currency:i,videoPrice:c,channel_name:u}))):null,r.a.createElement(O.a,null,r.a.createElement(j.a,null,r.a.createElement(F,{status:n})),o.map((function(t){return r.a.createElement(j.a,{key:t.request_id,style:{marginBottom:"20px"}},r.a.createElement(V,{updateVideoRequests:e.updateVideoRequests,viewOnly:l,data:t}))}))))}return r.a.createElement("div",null,"Loading")}}]),t}(n.Component),M=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={profileData:!1},a.loadProfile=function(e){a.setState({profileData:e})},a.updateProfileData=function(e){console.log("UPDRAGE");var t=a.state.profileData;console.log(t,"EXISTING"),console.log(e,"UPDATED"),t.requests=e.requests,t.status=e.status,a.setState({profileData:t})},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state.profileData;e.requests,e.status,e.user_id;return e?(console.log(e),r.a.createElement(f.a,null,r.a.createElement(_,{profile:e}),r.a.createElement(U,{updateProfileData:this.updateProfileData,profileData:e}))):r.a.createElement(f.a,null,r.a.createElement(q,{loadProfile:this.loadProfile}))}}]),t}(n.Component),B=function(){return r.a.createElement("div",null,"Page Not found")},G=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,errorMessage:"",profileData:!1},a.getUserId=function(e){return e.split("viewprofile/")[1]},a.fetchProfile=function(){var e=Object(v.a)(E.a.mark((function e(t){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://requstenator-server.herokuapp.com","/videorequests/").concat(t));case 3:if(200!==(n=e.sent).status){e.next=12;break}return e.next=7,n.json();case 7:r=e.sent,console.log("FETCH"),a.setState({profileData:r,loading:!1}),e.next=13;break;case 12:a.setState({error:!0,errorMessage:"Profile doesn't exist",loading:!1});case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),a.setState({error:!0,errorMessage:"Could not get profile",loading:!1});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),a.updateProfileData=function(e){var t=a.state.profileData;console.log(t,"EXISTING"),console.log(e,"UPDATED"),t.requests=e.requests,t.status=e.status,a.setState({profileData:t})},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){if(!this.state.profileData){var e=this.getUserId(window.location.href);this.fetchProfile(e)}}},{key:"render",value:function(){this.getUserId(window.location.href);var e=this.state,t=e.profileData,a=e.loading,n=e.errorMessage;return a?r.a.createElement("div",null,"Loading"):t?r.a.createElement("div",null,r.a.createElement(U,{viewOnly:!0,profileData:t,updateProfileData:this.updateProfileData})):r.a.createElement("div",null,n)}}]),t}(n.Component);var Y=function(){return r.a.createElement(s.a,{basename:"/video-requester"},r.a.createElement(c.c,null,r.a.createElement(c.a,{exact:!0,path:"/"},r.a.createElement(M,null)),r.a.createElement(c.a,{path:"/viewprofile"},r.a.createElement(G,null)),r.a.createElement(c.a,{component:B})))};l.a.render(r.a.createElement(Y,null),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.09662a6e.chunk.js.map