(this["webpackJsonpvideo-requester"]=this["webpackJsonpvideo-requester"]||[]).push([[0],{28:function(e,t,n){e.exports=n(44)},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(22),l=n.n(i),r=(n(33),n(34),n(35),n(25)),s=n(13),c=n(17),u=n(5),d=n(6),h=n(9),p=n(7),m=n(8),f=function(e){return o.a.createElement(c.GoogleLogin,{disabled:e.isLoading,clientId:"317396825022-qi6q964ae2t2mv5vbg3eg9lu32hkuba5.apps.googleusercontent.com",buttonText:e.isLoading?"Loading...":"Login",onSuccess:function(t){e.logIn(t)},onFailure:function(){e.logInFailure()},cookiePolicy:"single_host_origin"})},g=n(45),v=n(46),E=n(47),y=n(48),b=n(49),w=(n(36),n(50)),q=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={loadingPlayer:!0},n.loadVideo=function(){var e=n.props.id;n.player=new window.YT.Player("youtube-player-".concat(e),{videoId:e,events:{onReady:n.onPlayerReady}})},n.onPlayerReady=function(e){e.target.a.width="100%",console.log("player is ready to play"),n.props.fulfillRequest()},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){if(window.YT)console.log("script alraedy loaded"),this.loadVideo();else{console.log("Script was loaded");var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api",window.onYouTubeIframeAPIReady=this.loadVideo;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}}},{key:"render",value:function(){return o.a.createElement("div",{id:"youtube-player-".concat(this.props.id)})}}]),t}(a.Component),I=function(){return o.a.createElement("div",{style:{width:"350px",height:"360px",backgroundColor:"#ffc107"}},o.a.createElement("div",{style:{position:"absolute",top:"150px",left:"100px"}},"Request not fulfilled"))},O=(n(37),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(h.a)(this,Object(p.a)(t).call(this,e))).checkValidUrl=function(e){var t=e.match(/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);return!(!t||11!==t[2].length)&&t[2]},n.sendData=function(e){var t=n.state.linkInfo.linkInfo;n.setState({loadingData:!0}),console.log("sending request"),fetch("http://localhost:3001/fulfillrequest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({videoId:e,token_id:window.localStorage.getItem("token_id"),requestId:n.props.requestId})}).then((function(a){201===a.status?a.json().then((function(t){n.fulfillRequest(e)})):(console.log("something went wrong with the request"),t="Something went wrong"),n.setState({loadingData:!1,linkInfo:t})})).catch((function(e){console.log(e),t="Unable to connect to server",n.setState({loadingData:!1,linkInfo:t})}))},n.loadVideoUrl=function(e){var t=n.checkValidUrl(e);t?n.sendData(t):n.setState({linkInfo:"not valid youtube link"})},n.fulfillRequest=function(e){n.setState({requestFulfilled:!0,videoId:e})},console.log("component mount is happening"),n.state={style:{opacity:1,transition:"1s"},requestFulfilled:!1,loadingData:!1,videoLoaded:!1,videoId:"",linkInfo:"Insert a youtube video link here"},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.videoId&&this.setState({videoId:this.props.videoId,requestFulfilled:!0}),this.props.viewOnly&&console.log("view only component"),this.props.componentRendered(),setTimeout((function(){console.log("ti tii ti ititii itiitiii",e.props.videoId)}),2e3)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{style:{animation:"appearance 5s"}},o.a.createElement(w.a,{bg:this.state.requestFulfilled?"success":"warning",style:{width:"22rem",margin:"auto",marginTop:"25px"}},this.state.requestFulfilled?o.a.createElement(q,{fulfillRequest:this.fulfillRequest,id:this.state.videoId}):this.props.viewOnly?o.a.createElement(I,null):this.state.loadingData?o.a.createElement("div",{style:{width:"350px",height:"360px",backgroundColor:"#ffc107"}},o.a.createElement("div",{style:{position:"absolute",right:"80px",top:"175px"}},o.a.createElement("div",null,"Loading"))):o.a.createElement("div",{style:{width:"350px",height:"360px",backgroundColor:"#ffc107"}},o.a.createElement("div",{style:{position:"absolute",right:"80px",top:"175px"}},o.a.createElement("div",null,o.a.createElement("input",{style:{width:"200px"},onChange:function(t){e.loadVideoUrl(t.currentTarget.value)},type:"text"})),o.a.createElement("p",null,this.state.linkInfo))),o.a.createElement(w.a.Body,null,o.a.createElement(w.a.Title,null,this.props.title),o.a.createElement(w.a.Text,null,this.props.description))))}}]),t}(a.Component)),j=n(52),R=n(51),k=(o.a.createElement(j.a,{id:"popover-basic"},o.a.createElement(j.a.Title,{as:"h3"},"Max video requests"),o.a.createElement(j.a.Content,null,o.a.createElement("input",{type:"text"}),o.a.createElement(R.a,null,"Save"))),function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(w.a,{style:{width:"22rem",margin:"auto",marginTop:"25px"}},o.a.createElement(w.a.Body,null,o.a.createElement(w.a.Title,null,o.a.createElement("h1",null,"Video Requests")),o.a.createElement(w.a.Text,null,"Here is the list of all recent video requests"),o.a.createElement(w.a.Text,null,"The price for a video is : ",this.props.requestPrice),o.a.createElement("div",null,o.a.createElement("h2",null,this.props.unfinishedRequests,"/",this.props.totalRequests," unfilled video requests")))))}}]),t}(a.Component)),S=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={loadingContent:!0,loadingIndex:0,unfinishedRequests:0,data:!1},n.youtubeLoaded=function(){console.log("youtube iframe api loaded"),n.setState({loadingContent:!1})},n.loadYoutube=function(){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api",window.onYouTubeIframeAPIReady=n.youtubeLoaded;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)},n.parseVideoRequests=function(e){return e.map((function(e){return JSON.parse(e)}))},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.data;this.loadYoutube(),e.videorequests=this.parseVideoRequests(this.props.data.videorequests),console.log(e,"parsed data"),this.setState({data:e})}},{key:"render",value:function(){var e=this.state.data;return this.state.loadingContent?o.a.createElement("div",null,o.a.createElement(g.a,null,o.a.createElement("div",{className:"headline"},o.a.createElement("h1",null,"Loading..."),o.a.createElement("p",null,"loading info..."))),o.a.createElement("div",{style:{paddingLeft:"50%",width:"100%"}},o.a.createElement(v.a,{animation:"border"}))):o.a.createElement("div",null,o.a.createElement(E.a,{fluid:!0},o.a.createElement(y.a,null,o.a.createElement(b.a,null,o.a.createElement(g.a,null,o.a.createElement("div",{className:"headline"},o.a.createElement("h1",null,e.firstname),o.a.createElement("p",null,"Basic info about ",e.firstname))))),o.a.createElement(y.a,null,o.a.createElement(b.a,null,o.a.createElement(k,{unfinishedRequests:this.state.data.unfinishedRequests,videoPrice:this.state.data.videoPrice})),this.state.data.videorequests.map((function(e){return o.a.createElement(b.a,null," ",o.a.createElement(O,{key:e.request_id,requestId:e.request_id,description:e.description,title:e.title,videoId:e.video_id}))})))))}}]),t}(a.Component),x=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={isLoading:!1,loggedIn:!1,errorInfo:"",data:!1},n.logIn=function(e){n.setState({isLoading:!0});var t=e.tokenId;fetch("http://localhost:3001/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token_id:t})}).then((function(e){200===e.status?e.json().then((function(e){n.setState({loggedIn:!0,data:e}),window.localStorage.setItem("token_id",t)})):201===e.status?e.json().then((function(e){console.log(e),n.setState({loggedIn:!0,data:e}),window.localStorage.setItem("token_id",t)})):(console.log("no bueno status is not 200 ok"),n.setState({errorInfo:"Something went wrong while signin in"}))})).catch((function(e){console.log(e),n.setState({errorInfo:"Couldn't connect to the server"}),console.log("yo man, there is an error connecting to server")})).finally((function(){n.setState({isLoading:!1})}))},n.logInFailure=function(){console.log("failed to log in")},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return this.state.loggedIn?this.state.loggedIn?o.a.createElement("div",null,o.a.createElement(S,{data:this.state.data})):void 0:o.a.createElement("div",{style:{textAlign:"center",marginTop:"290px"}},o.a.createElement(g.a,null,o.a.createElement("h1",null,"Requstenator"),o.a.createElement("p",null,"Create and sell custom video content for your audience!"),o.a.createElement("p",null,o.a.createElement(f,{isLoading:this.state.isLoading,logInFailure:this.logInFailure,logIn:this.logIn})),o.a.createElement("p",{style:{color:"red"}},this.state.errorInfo)))}}]),t}(a.Component),T=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={loading:!1,title:"",description:"",infoMessage:""},n.createVideoRequest=function(e,t){fetch("http://localhost:3001/createrequest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:n.props.userId,title:e,description:t})}).then((function(e){201===e.status?(console.log("created a new video request"),n.setState({infoMessage:"Video requested"})):(console.log("something went wrong with requesting video"),n.setState({infoMessage:"Connection error"}))}))},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.title,a=t.description;return o.a.createElement("div",null,o.a.createElement(w.a,{style:{width:"22rem",margin:"auto",marginTop:"25px"}},o.a.createElement(w.a.Body,null,o.a.createElement(w.a.Title,null,o.a.createElement("input",{disabled:this.state.loading,onChange:function(t){e.setState({title:t.currentTarget.value})},value:n,type:"text",placeholder:"Title",maxLength:"35"})),o.a.createElement(w.a.Text,null,o.a.createElement("textarea",{disabled:this.state.loading,onChange:function(t){e.setState({description:t.currentTarget.value})},value:a,maxLength:"854",style:{resize:"none"},rows:"14.5",cols:"40",placeholder:"Write a description of the video you want"})),o.a.createElement(R.a,{onClick:function(){e.props.createVideoRequest(n,a)},disabled:this.state.loading,variant:"primary"},this.state.loading?o.a.createElement(v.a,{animation:"border"}):"Request video"),o.a.createElement("p",{style:{float:"right",color:"red"}},this.state.errorMessage))))}}]),t}(a.Component),C=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={renderedRequests:[],requestPrice:"Free",totalRequests:25,unfinishedRequests:0,creatingVideoRequest:!1,data:!1,userId:"",loadingProfile:!1,profileFound:!1},n.createVideoRequest=function(e,t){var a=n.state.data,o={title:e,description:t};a.push(o),n.setState({data:a}),console.log("send video request to backend "),console.log(e,t)},n.getProfile=function(e){console.log("am i happeninig?"),fetch("http://localhost:3001/getprofile/".concat(e)).then((function(t){200===t.status?t.json().then((function(t){t=n.parseData(t),console.log("this was gotten",t),n.setState({data:t,profileFound:!0,userId:e})})):console.log("something went wrong")}))},n.parseData=function(e){return e.map((function(e){return JSON.parse(e)}))},n.componentRendered=function(){var e=n.state.renderedRequests,t=n.state.data;e.push(t[e.length]),n.setState({renderedRequests:e})},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=window.location.hash.slice(1);console.log("mounting",e),this.getProfile(e)}},{key:"render",value:function(){var e=this,t=this.state,n=t.loadingProfile,a=(t.data,t.profileFound);if(n)return o.a.createElement("div",null,o.a.createElement(g.a,null,o.a.createElement("div",{className:"headline"},o.a.createElement("h1",null,"Loading..."),o.a.createElement("p",null,"loading info..."))),o.a.createElement("div",{style:{paddingLeft:"50%",width:"100%"}},o.a.createElement(v.a,{animation:"border"})));if(a){var i=this.state.data;return o.a.createElement("div",null,o.a.createElement(E.a,{fluid:!0},o.a.createElement(y.a,null,o.a.createElement(b.a,null,o.a.createElement(g.a,null,o.a.createElement("div",{className:"headline"},o.a.createElement("h1",null,i.userName),o.a.createElement("p",null,"Basic info about ",i.userName))))),o.a.createElement(y.a,null,o.a.createElement(b.a,null,o.a.createElement(k,{totalRequests:this.state.totalRequests,unfinishedRequests:this.state.unfinishedRequests,requestPrice:this.state.requestPrice})),this.state.data.map((function(t){return o.a.createElement(b.a,null," ",o.a.createElement(O,{componentRendered:e.componentRendered,viewOnly:!0,description:t.description,title:t.title,videoId:t.video_id}))})),o.a.createElement(b.a,null,o.a.createElement(T,{createVideoRequest:this.createVideoRequest,userId:this.state.userId})))))}return o.a.createElement("div",null,o.a.createElement(g.a,null,o.a.createElement("div",{className:"headline"},o.a.createElement("h1",null,"Not found"),o.a.createElement("p",null,"Profile with that name was not found"))))}}]),t}(a.Component);var P=function(){return o.a.createElement(r.a,null,o.a.createElement(s.c,null,o.a.createElement(s.a,{path:"/viewprofile"},o.a.createElement(C,null)),o.a.createElement(s.a,{path:"/"},o.a.createElement(x,null))))};l.a.render(o.a.createElement(P,null),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.0d94fab5.chunk.js.map