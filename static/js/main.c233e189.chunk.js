(this["webpackJsonpvideo-requester"]=this["webpackJsonpvideo-requester"]||[]).push([[0],{45:function(e,t,a){e.exports=a.p+"static/media/loader.9bdf6f25.gif"},55:function(e,t,a){e.exports=a(74)},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},67:function(e,t,a){},69:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(13),i=a.n(o),l=(a(60),a(61),a(21)),s=a(42),c=(a(62),a(51)),u=a(18),d=a(6),m=a(7),p=a(10),h=a(8),f=a(9),g=a(44),v=function(e){return r.a.createElement(g.GoogleLogin,{disabled:e.isLoading,clientId:"317396825022-qi6q964ae2t2mv5vbg3eg9lu32hkuba5.apps.googleusercontent.com",buttonText:e.isLoading?"Loading...":"Login",onSuccess:function(t){e.logIn(t)},onFailure:function(){e.logInFailure()},cookiePolicy:"single_host_origin"})},y=a(77),E=a(79),b=a(80),S=a(78),w=a(49),q=(a(63),a(83)),O=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={loadingPlayer:!0},a.loadVideo=function(){var e=a.props.id;a.player=new window.YT.Player("youtube-player-".concat(e),{height:360,width:350,videoId:e,events:{onReady:a.onPlayerReady}})},a.onPlayerReady=function(e){a.props.fulfillRequest()},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){if(window.YT)console.log("script alraedy loaded"),this.loadVideo();else{console.log("Script was loaded");var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api",window.onYouTubeIframeAPIReady=this.loadVideo;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}}},{key:"render",value:function(){return r.a.createElement("div",{id:"youtube-player-".concat(this.props.id)})}}]),t}(n.Component),j=function(){return r.a.createElement("div",{style:{width:"350px",height:"360px",backgroundColor:"#ffc107"}},r.a.createElement("div",{style:{position:"absolute",top:"150px",left:"100px"}},"Request not fulfilled"))},k=(a(64),a(45)),C=a.n(k),I=function(){return r.a.createElement("div",{style:{width:"350px",height:"360px",backgroundColor:"#ffc107"}},r.a.createElement("img",{alt:"loader",src:C.a,width:"100%",height:"100%"}))},N=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).checkValidUrl=function(e){var t=e.match(/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);return!(!t||11!==t[2].length)&&t[2]},a.sendData=function(e){var t=a.state.linkInfo.linkInfo;a.setState({loading:!0}),console.log("sending request"),fetch("https://requstenator-server.herokuapp.com/fulfillrequest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({videoId:e,token_id:window.localStorage.getItem("token_id"),requestId:a.props.requestId})}).then((function(n){201===n.status?n.json().then((function(t){a.fulfillRequest(e)})):(console.log("something went wrong with the request"),t="Something went wrong")})).catch((function(e){console.log(e),t="Unable to connect to server"})).finally((function(e){a.setState({loading:!1,linkInfo:t}),console.log(e,"final data")}))},a.loadVideoUrl=function(e){var t=a.checkValidUrl(e);t?a.sendData(t):a.setState({linkInfo:"not valid youtube link"})},a.fulfillRequest=function(e){var t=a.state.style;t={opacity:1,transition:"1s"},e?a.setState({requestFulfilled:!0,videoId:e,loading:!1,style:t}):a.setState({loading:!1,style:t})},console.log("component mount is happening"),a.state={style:{opacity:0,transition:"1s"},requestFulfilled:!1,loading:!1,videoId:"",linkInfo:"Insert a youtube video link here"},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.videoId?this.setState({videoId:this.props.videoId,requestFulfilled:!0}):this.fulfillRequest(),this.props.viewOnly&&console.log("view only component")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:this.state.style,className:"video-request"},r.a.createElement(q.a,{bg:this.state.requestFulfilled?"success":"warning",style:{width:"22rem",margin:"auto",marginTop:"25px"}},this.state.loading?r.a.createElement(I,null):this.state.requestFulfilled?r.a.createElement(O,{fulfillRequest:this.fulfillRequest,id:this.state.videoId}):this.props.viewOnly?r.a.createElement(j,null):r.a.createElement("div",{style:{width:"350px",height:"360px",backgroundColor:"#ffc107"}},r.a.createElement("div",{style:{position:"absolute",right:"80px",top:"175px"}},r.a.createElement("div",null,r.a.createElement("input",{style:{width:"200px"},onChange:function(t){e.loadVideoUrl(t.currentTarget.value)},type:"text"})),r.a.createElement("p",null,this.state.linkInfo))),r.a.createElement(q.a.Body,null,r.a.createElement(q.a.Title,null,this.props.title),r.a.createElement(q.a.Text,null,this.props.description))))}}]),t}(n.Component),x=a(47),T=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.unfulfilledRequestsAmount,a=e.fulfilledRequestsAmount,n=e.requestsAmount;return console.log(t,a,n,"WATCH THESE"),r.a.createElement("div",null,r.a.createElement(q.a,{style:{width:"22rem",margin:"auto",marginTop:"25px"}},r.a.createElement(q.a.Body,null,r.a.createElement(q.a.Title,null,r.a.createElement("h1",null,"Video Requests")),r.a.createElement(q.a.Text,null,"Here is the list of all recent video requests"),r.a.createElement(q.a.Text,null,"The price for a video request is : ",r.a.createElement(x.a,null,this.props.videoPrice.price+" "+this.props.videoPrice.currency)),r.a.createElement("div",null,r.a.createElement("h2",null,t,"/",n," unfilled video requests")))))}}]),t}(n.Component),P=a(82),R=a(84),A=a(76),_=a(32),D=["USD","EUR","GBP"],V=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={input:"",currency:"",price:"",saved:!1},a.setPrice=function(){a.setState({price:a.state.input}),a.props.changedData("video_price",a.state.input)},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.setState({currency:this.props.currency,price:this.props.price})}},{key:"render",value:function(){var e=this;return r.a.createElement(P.a,{onExit:function(){e.setState({input:""})},trigger:"click",placement:"top",overlay:r.a.createElement(R.a,{id:"popover-basic"},r.a.createElement(R.a.Title,{as:"h3"},"Set video price"),r.a.createElement(R.a.Content,null,r.a.createElement("input",{type:"number",min:"0",max:"500",value:this.state.input,onChange:function(t){e.setState({input:t.currentTarget.value})}}),r.a.createElement(x.a,{onClick:function(){e.setPrice()}},"Save")))},r.a.createElement(x.a,{disabled:this.props.disabled,variant:"success"},r.a.createElement("h1",null,this.state.input.length<=0?this.state.price:this.state.input)))}}]),t}(n.Component),L=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={currentlySelected:a.props.currency.toUpperCase()},a.setCurrency=function(e){a.setState({currentlySelected:e}),a.props.changedData("currency",e)},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(A.a,{disabled:this.props.disabled,id:"dropdown-basic-button",title:this.state.currentlySelected,style:{display:"inline"}},D.map((function(t){return r.a.createElement(_.a.Item,{key:t,onClick:function(){e.setCurrency(t)}},t)})))}}]),t}(n.Component),B=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={editingProfile:!1,input:"",userName:"",saved:!1},a.setUsername=function(){a.setState({userName:a.state.input}),a.props.changedData("username",a.state.input)},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.setState({userName:this.props.userName})}},{key:"render",value:function(){var e=this;return r.a.createElement(P.a,{onExit:function(){e.setState({input:""})},trigger:"click",placement:"top",overlay:r.a.createElement(R.a,{id:"popover-basic"},r.a.createElement(R.a.Title,{as:"h3"},"Rename username"),r.a.createElement(R.a.Content,null,r.a.createElement("input",{maxLength:"25",type:"text",value:this.state.input,onChange:function(t){e.setState({input:t.currentTarget.value})}}),r.a.createElement(x.a,{onClick:function(){e.setUsername()}},"Save")))},r.a.createElement(x.a,{disabled:this.props.disabled,variant:"success"},r.a.createElement("h1",null,this.state.input.length<=0?this.state.userName:this.state.input)))}}]),t}(n.Component),F=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={infoText:"",loading:!1,stripeAccount:!0,changedData:{}},a.saveProfile=function(){a.setState({loading:!0});var e=a.state.changedData;console.log(a.state.changedData,"CHANGED DATA YOU"),fetch("https://requstenator-server.herokuapp.com/editprofile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token_id:window.localStorage.getItem("token_id"),data:e})}).then((function(e){e.json().then((function(e){console.log("parsed data",e),a.setState({loading:!1})}))}))},a.changedData=function(e,t){var n=a.state.changedData;n[e]=t,a.setState({changedData:n})},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.setState({userName:this.props.userName})}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.infoText;return r.a.createElement("div",{className:"top-info"},r.a.createElement(y.a,null,r.a.createElement("h1",null,r.a.createElement(B,{disabled:a,userName:this.props.userName,changedData:this.changedData})),r.a.createElement(S.a,null,r.a.createElement(w.a,{md:"6"},r.a.createElement("p",null,"Tell your audience to send video requests here : ",r.a.createElement("a",{target:"blank",href:window.location.href+"viewprofile#"+this.props.user_id},window.location.href+"viewprofile#"+this.props.user_id)),this.state.stripeAccount?r.a.createElement("p",null,"You have integrated stripe to your profile!"):r.a.createElement("p",null,"Start charging money for video requests : ",r.a.createElement("a",{href:"https://connect.stripe.com/express/oauth/authorize?client_id=".concat("ca_GwaRKUrsZ7EmttRGiaV1lei21MlM5Vpz","&state=").concat(this.props.stripeState,".com")},"Create Stripe Account"))),r.a.createElement(w.a,null,r.a.createElement("p",null,"Current video price is ",r.a.createElement(V,{disabled:a,price:this.props.price,changedData:this.changedData})," ",r.a.createElement(L,{disabled:a,currency:this.props.currency,changedData:this.changedData})),r.a.createElement(x.a,{disabled:a,onClick:function(){e.saveProfile()}},a?r.a.createElement(E.a,{animation:"border"}):"Save changes"),r.a.createElement("p",null,n)))))}}]),t}(n.Component),M=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={stripeAccount:!1,loadingContent:!0,loadingIndex:0,unfinishedRequests:0,data:!1},a.youtubeLoaded=function(){console.log("youtube iframe api loaded"),a.setState({loadingContent:!1})},a.loadYoutube=function(){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api",window.onYouTubeIframeAPIReady=a.youtubeLoaded;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)},a.parseVideoRequests=function(e){return e.map((function(e){return JSON.parse(e)}))},a.checkStripeIntegration=function(e){return!!e.includes("acct_")},a.rejectRequest=function(e){a.state.data.videorequests.filter},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.data;this.loadYoutube(),e.videorequests=this.parseVideoRequests(this.props.data.videorequests);var t=this.checkStripeIntegration(e.stripe_account_id);console.log(e,"parsed data"),this.setState({data:e,stripeAccount:t})}},{key:"render",value:function(){var e=this.state.data.stripeState,t=this.state.data;return this.state.loadingContent?r.a.createElement("div",null,r.a.createElement(y.a,null,r.a.createElement("div",{className:"headline"},r.a.createElement("h1",null,"Loading..."),r.a.createElement("p",null,"loading info..."))),r.a.createElement("div",{style:{paddingLeft:"50%",width:"100%"}},r.a.createElement(E.a,{animation:"border"}))):r.a.createElement("div",null,r.a.createElement(b.a,{fluid:!0},r.a.createElement(F,{stripeState:e,userName:t.username,user_id:t.user_id,price:t.video_price,currency:t.currency}),r.a.createElement(S.a,null,r.a.createElement(w.a,null,r.a.createElement(T,{videoPrice:{price:t.video_price,currency:t.currency},unfulfilledRequestsAmount:this.state.data.requestsAmount-this.state.data.fulfilledRequestsAmount,fulfilledRequestsAmount:this.state.data.fulfilledRequestsAmount,requestsAmount:this.state.data.requestsAmount})),this.state.data.videorequests.map((function(e){return r.a.createElement(w.a,null," ",r.a.createElement(N,{key:e.request_id,requestId:e.request_id,description:e.description,title:e.title,videoId:e.video_id}))})))))}}]),t}(n.Component),U=(a(67),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!1,loggedIn:!1,errorInfo:"",data:!1},a.logIn=function(e){a.setState({isLoading:!0});var t=e.tokenId;fetch("https://requstenator-server.herokuapp.com/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token_id:t})}).then((function(e){200===e.status?e.json().then((function(e){a.setState({loggedIn:!0,data:e}),window.localStorage.setItem("token_id",t)})):201===e.status?e.json().then((function(e){console.log(e),a.setState({loggedIn:!0,data:e}),window.localStorage.setItem("token_id",t)})):(console.log("no bueno status is not 200 ok"),a.setState({errorInfo:"Something went wrong while signin in"}))})).catch((function(e){console.log(e),a.setState({errorInfo:"Couldn't connect to the server"}),console.log("yo man, there is an error connecting to server")})).finally((function(){a.setState({isLoading:!1})}))},a.logInFailure=function(){console.log("failed to log in"),alert("failed to login")},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return this.state.loggedIn?this.state.loggedIn?r.a.createElement("div",null,r.a.createElement(M,{data:this.state.data})):void 0:r.a.createElement("div",{clas:!0,style:{textAlign:"center"}},r.a.createElement("div",{class:"jumbotron"},r.a.createElement("h1",{style:{fontSize:"85px"},className:"display-4"},"Vregs"),r.a.createElement("p",{className:"lead"},"Allows youtubers to get video requests and sell custom video content"),r.a.createElement("hr",{className:"my-4"}),r.a.createElement(v,{isLoading:this.state.isLoading,logInFailure:this.logInFailure,logIn:this.logIn})),r.a.createElement("div",{className:"container"},r.a.createElement(S.a,null,r.a.createElement(w.a,null,r.a.createElement("div",{className:"jumbotron",style:{backgroundColor:"white"}},r.a.createElement("i",{style:{marginBottom:"25px"},className:"fas fa-user-plus fa-4x"}),r.a.createElement("h1",{classNameName:"display-4"},"1. Sign in"),r.a.createElement("p",{classNameName:"lead"},"Setup your account by signing in with your youtube/google account"))),r.a.createElement(w.a,null,r.a.createElement("div",{className:"jumbotron",style:{backgroundColor:"white"}},r.a.createElement("i",{style:{marginBottom:"25px"},className:"fas fa-upload fa-4x"}),r.a.createElement("h1",{classNameName:"display-4"},"2. Setup your account"),r.a.createElement("p",{classNameName:"lead"},"Setup your account and start accepting custom video requests"))),r.a.createElement(w.a,null,r.a.createElement("div",{className:"jumbotron",style:{backgroundColor:"white"}},r.a.createElement("i",{style:{marginBottom:"25px"},className:"fas fa-dollar-sign fa-4x"}),r.a.createElement("h1",{classNameName:"display-4"},"3. Gain revenue"),r.a.createElement("p",{classNameName:"lead"},"Fullfill custom video requests and gain revenue"))))))}}]),t}(n.Component)),Y=a(35),H=a.n(Y),G=a(50),J=(a(69),{style:{base:{color:"#32325d",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}});var z=function(){return r.a.createElement("label",null,"Card details",r.a.createElement(l.CardElement,{options:J}))},W=a(81),K=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",email:"",payment_intent:!1,errorMessage:"",paymentHandled:!1,loading:!1},a.handleSubmit=function(){var e=Object(G.a)(H.a.mark((function e(t){var n,r,o,i,s,c,u,d;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.setState({loading:!0}),n=a.props,r=n.stripe,o=n.elements,i=n.clientSecret,s=a.state,c=s.name,u=s.email,e.next=7,r.confirmCardPayment(i,{payment_method:{card:o.getElement(l.CardElement),billing_details:{name:c,email:u}}});case 7:(d=e.sent).error?(console.log("something went wrong with this whole thing"),console.log(d.error.message),a.setState({paymentHandled:!0,errorMessage:"something went wrong",loading:!1})):"succeeded"===d.paymentIntent.status&&(a.setState({paymentHandled:!0,loading:!1,payment_intent:d.paymentIntent.id}),console.log(d.paymentIntent,"payment intent"),console.log("payment succeeded"));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.errorMessage;return t.paymentHandled?a.length>0?r.a.createElement("div",null,r.a.createElement("p",null,"Something went wrong with payment"),r.a.createElement(x.a,{variant:"danger",onClick:function(){e.props.togglePaymentScreen()}},"Oops!")):r.a.createElement("div",null,r.a.createElement("p",null,"Payment Succeeded!"),r.a.createElement(x.a,{variant:"success",onClick:function(){e.props.togglePaymentScreen(e.state.payment_intent)}},"Ok!")):r.a.createElement(W.a,{onSubmit:this.handleSubmit},r.a.createElement(z,null),r.a.createElement(W.a.Group,{controlId:"formBasicEmail"},r.a.createElement(W.a.Label,null,"Email address"),r.a.createElement(W.a.Control,{value:this.state.email,onChange:function(t){e.setState({email:t.currentTarget.value})},type:"email",placeholder:"Enter email"}),r.a.createElement(W.a.Text,{className:"text-muted"},"Email is used for refunding payments.")),r.a.createElement(W.a.Group,{controlId:"formFullName"},r.a.createElement(W.a.Label,null,"Full name"),r.a.createElement(W.a.Control,{value:this.state.name,onChange:function(t){e.setState({name:t.currentTarget.value})},type:"text",placeholder:"Full name"})),r.a.createElement(x.a,{variant:"primary",type:"submit"},"Submit"))}}]),t}(r.a.Component);function Q(e){return r.a.createElement(l.ElementsConsumer,null,(function(t){var a=t.stripe,n=t.elements;return r.a.createElement(K,{stripe:a,elements:n,clientSecret:e.clientSecret,togglePaymentScreen:e.togglePaymentScreen})}))}var X=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={clientSecret:!1},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://requstenator-server.herokuapp.com/handlepayment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({video_price:this.props.videoPrice.price,currency:this.props.videoPrice.currency})}).then((function(t){t.json().then((function(t){console.log(t,"this should contain the clientSecret"),e.setState({clientSecret:t.clientSecret})}))})).catch((function(e){console.log("something went wrong with handeling payment")}))}},{key:"render",value:function(){var e=this.state.clientSecret;return e?r.a.createElement("div",{style:{position:"fixed",top:"0px",right:"0%",left:"0%",width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)"}},r.a.createElement(Q,{clientSecret:e,togglePaymentScreen:this.props.togglePaymentScreen,requestToBeCreated:this.props.requestToBeCreated,createVideoRequest:this.props.createVideoRequest})):r.a.createElement("div",null,"Loading ClientSecret for payments")}}]),t}(n.Component),Z=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={requestToBeCreated:{title:"",description:""},paymentScreen:!1,loading:!1,title:"",description:"",infoMessage:""},a.togglePaymentScreen=function(e){if(e){console.log("payment was a success, create a new video request");var t=a.state.requestToBeCreated;a.createVideoRequest(t.title,t.description,e)}var n=a.state.paymentScreen;a.setState({paymentScreen:!n})},a.startPaymentProcess=function(e,t){var n={title:e,description:t};a.setState({requestToBeCreated:n,paymentScreen:!0})},a.createVideoRequest=function(e,t,n){fetch("https://requstenator-server.herokuapp.com/createrequest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:a.props.userId,title:e,description:t,payment_id:n})}).then((function(n){201===n.status?(console.log("created a new video request"),a.setState({infoMessage:"Video requested"}),a.props.createVideoRequest(e,t)):(console.log("something went wrong with requesting video"),a.setState({infoMessage:"Connection error"}))}))},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.title,n=t.description;return r.a.createElement("div",null,r.a.createElement(q.a,{style:{width:"22rem",margin:"auto",marginTop:"25px"}},r.a.createElement(q.a.Body,null,r.a.createElement(q.a.Title,null,r.a.createElement("input",{disabled:this.state.loading,onChange:function(t){e.setState({title:t.currentTarget.value})},value:a,type:"text",placeholder:"Title",maxLength:"35"})),r.a.createElement(q.a.Text,null,r.a.createElement("textarea",{disabled:this.state.loading,onChange:function(t){e.setState({description:t.currentTarget.value})},value:n,maxLength:"854",style:{resize:"none"},rows:"14.5",cols:"40",placeholder:"Write a description of the video you want"})),r.a.createElement(x.a,{onClick:function(){e.startPaymentProcess(a,n)},disabled:this.state.loading,variant:"primary"},this.state.loading?r.a.createElement(E.a,{animation:"border"}):"Request video"),r.a.createElement("p",{style:{float:"right",color:"red"}},this.state.errorMessage))),this.state.paymentScreen?r.a.createElement(X,{videoPrice:{price:this.props.videoPrice.price,currency:this.props.videoPrice.currency},requestToBeCreated:this.state.requestToBeCreated,togglePaymentScreen:this.togglePaymentScreen,createVideoRequest:this.createVideoRequest}):null)}}]),t}(n.Component),$=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={renderedRequests:[],requestPrice:"Free",totalRequests:25,unfinishedRequests:0,creatingVideoRequest:!1,data:!1,userId:"",loadingData:!0},a.createVideoRequest=function(e,t){var n=a.state.data,r={title:e,description:t};n.videoRequests.push(r),a.setState({data:n}),console.log("send video request to backend "),console.log(e,t)},a.getProfile=function(e){fetch("https://requstenator-server.herokuapp.com/getprofile/".concat(e)).then((function(t){200===t.status?t.json().then((function(t){a.setState({data:t,userId:e})})):console.log("something went wrong"),a.setState({loadingData:!1})}))},a.youtubeLoaded=function(){console.log("youtube iframe api loaded");var e=window.location.hash.slice(1);a.getProfile(e)},a.loadYoutube=function(){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api",window.onYouTubeIframeAPIReady=a.youtubeLoaded;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.loadYoutube()}},{key:"render",value:function(){var e=this,t=this.state,a=t.loadingData,n=t.data;if(a&&!n)return r.a.createElement("div",null,r.a.createElement(y.a,null,r.a.createElement("div",{className:"headline"},r.a.createElement("h1",null,"Loading..."),r.a.createElement("p",null,"loading info..."))),r.a.createElement("div",{style:{paddingLeft:"50%",width:"100%"}},r.a.createElement(E.a,{animation:"border"})));if(n||a){var o=this.state.data;return r.a.createElement("div",null,r.a.createElement(b.a,{fluid:!0},r.a.createElement(S.a,null,r.a.createElement(w.a,null,r.a.createElement(y.a,null,r.a.createElement("div",{style:{color:"purple",textAlign:"center"}},r.a.createElement("h1",null,o.userName),r.a.createElement("p",null,"give youtube video ideas to ",o.userName))))),r.a.createElement(S.a,null,r.a.createElement(w.a,null,r.a.createElement(T,{requestsAmount:o.requestsAmount,unfulfilledRequestsAmount:o.unfilledRequests,videoPrice:{price:o.videoPrice,currency:o.currency}})),this.state.data.videoRequests.map((function(t){return r.a.createElement(w.a,null," ",r.a.createElement(N,{key:t.request_id,componentRendered:e.componentRendered,viewOnly:!0,description:t.description,title:t.title,videoId:t.video_id}))})),r.a.createElement(w.a,null,r.a.createElement(Z,{videoPrice:{price:o.videoPrice,currency:o.currency},createVideoRequest:this.createVideoRequest,userId:this.state.userId})))))}return r.a.createElement("div",null,r.a.createElement(y.a,null,r.a.createElement("div",{className:"headline"},r.a.createElement("h1",null,"Not found"),r.a.createElement("p",null,"Profile with that name was not found"))))}}]),t}(n.Component),ee=function(){return r.a.createElement("div",null,"Page not found!")};var te=function(){return r.a.createElement(c.a,{basename:"/video-requester"},r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/"},r.a.createElement(U,null)),r.a.createElement(u.a,{path:"/viewprofile"},r.a.createElement($,null)),r.a.createElement(u.a,{component:ee})))},ae=Object(s.a)("pk_test_DOEkIFRqbKXBqWg0ykobHYQP00nEaxN5cb");i.a.render(r.a.createElement(l.Elements,{stripe:ae},r.a.createElement(te,null)),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.c233e189.chunk.js.map