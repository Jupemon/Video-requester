(this["webpackJsonpvideo-requester"]=this["webpackJsonpvideo-requester"]||[]).push([[0],{27:function(e,t,n){e.exports=n.p+"static/media/loader.9bdf6f25.gif"},33:function(e,t,n){e.exports=n(47)},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),l=n(11),i=n.n(l),r=(n(38),n(39),n(40),n(19)),s=n(6),u=n(7),c=n(10),d=n(8),m=n(9),h=function(e){return o.a.createElement(r.GoogleLogin,{disabled:e.isLoading,clientId:"317396825022-qi6q964ae2t2mv5vbg3eg9lu32hkuba5.apps.googleusercontent.com",buttonText:e.isLoading?"Loading...":"Login",onSuccess:function(t){e.logIn(t)},onFailure:function(){e.logInFailure()},cookiePolicy:"single_host_origin"})},p=n(51),f=n(52),g=n(53),v=n(54),y=n(55),E=(n(41),n(57)),b=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={loadingPlayer:!0},n.loadVideo=function(){var e=n.props.id;n.player=new window.YT.Player("youtube-player-".concat(e),{videoId:e,events:{onReady:n.onPlayerReady}})},n.onPlayerReady=function(e){e.target.a.width="100%",console.log("player is ready to play"),n.props.fulfillRequest()},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){if(window.YT)console.log("script alraedy loaded"),this.loadVideo();else{console.log("Script was loaded");var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api",window.onYouTubeIframeAPIReady=this.loadVideo;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}}},{key:"render",value:function(){return o.a.createElement("div",{id:"youtube-player-".concat(this.props.id)})}}]),t}(a.Component),w=function(){return o.a.createElement("div",{style:{width:"350px",height:"360px",backgroundColor:"#ffc107"}},o.a.createElement("div",{style:{position:"absolute",top:"150px",left:"100px"}},"Request not fulfilled"))},q=(n(42),n(27)),I=n.n(q),O=function(){return o.a.createElement("div",{style:{width:"350px",height:"360px",backgroundColor:"#ffc107"}},o.a.createElement("img",{src:I.a,width:"100%",height:"100%"}))},j=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).checkValidUrl=function(e){var t=e.match(/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);return!(!t||11!==t[2].length)&&t[2]},n.sendData=function(e){var t=n.state.linkInfo.linkInfo;n.setState({loading:!0}),console.log("sending request"),fetch("https://requstenator-server.herokuapp.com/fulfillrequest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({videoId:e,token_id:window.localStorage.getItem("token_id"),requestId:n.props.requestId})}).then((function(a){201===a.status?a.json().then((function(t){n.fulfillRequest(e)})):(console.log("something went wrong with the request"),t="Something went wrong")})).catch((function(e){console.log(e),t="Unable to connect to server"})).finally((function(e){n.setState({loading:!1,linkInfo:t}),console.log(e,"final data")}))},n.loadVideoUrl=function(e){var t=n.checkValidUrl(e);t?n.sendData(t):n.setState({linkInfo:"not valid youtube link"})},n.fulfillRequest=function(e){var t=n.state.style;t={opacity:1,transition:"1s"},e?n.setState({requestFulfilled:!0,videoId:e,loading:!1,style:t}):n.setState({loading:!1,style:t})},console.log("component mount is happening"),n.state={style:{opacity:0,transition:"1s"},requestFulfilled:!1,loading:!1,videoId:"",linkInfo:"Insert a youtube video link here"},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.videoId?this.setState({videoId:this.props.videoId,requestFulfilled:!0}):this.fulfillRequest(),this.props.viewOnly&&console.log("view only component")}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{style:this.state.style,className:"video-request"},o.a.createElement(E.a,{bg:this.state.requestFulfilled?"success":"warning",style:{width:"22rem",margin:"auto",marginTop:"25px"}},this.state.loading?o.a.createElement(O,null):this.state.requestFulfilled?o.a.createElement(b,{fulfillRequest:this.fulfillRequest,id:this.state.videoId}):this.props.viewOnly?o.a.createElement(w,null):o.a.createElement("div",{style:{width:"350px",height:"360px",backgroundColor:"#ffc107"}},o.a.createElement("div",{style:{position:"absolute",right:"80px",top:"175px"}},o.a.createElement("div",null,o.a.createElement("input",{style:{width:"200px"},onChange:function(t){e.loadVideoUrl(t.currentTarget.value)},type:"text"})),o.a.createElement("p",null,this.state.linkInfo))),o.a.createElement(E.a.Body,null,o.a.createElement(E.a.Title,null,this.props.title),o.a.createElement(E.a.Text,null,this.props.description))))}}]),t}(a.Component),k=(n(50),n(56)),R=n(59);var S=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.unfulfilledRequestsAmount,n=e.fulfilledRequestsAmount,a=e.requestsAmount;return console.log(t,n,a,"WATCH THESE"),o.a.createElement("div",null,o.a.createElement(E.a,{style:{width:"22rem",margin:"auto",marginTop:"25px"}},o.a.createElement(E.a.Body,null,o.a.createElement(E.a.Title,null,o.a.createElement("h1",null,"Video Requests")),o.a.createElement(E.a.Text,null,"Here is the list of all recent video requests"),o.a.createElement(E.a.Text,null,"The price for a video is : ",this.props.requestPrice?this.props.requestPrice:"Free"),o.a.createElement("div",null,o.a.createElement("h2",null,t,"/",a," unfilled video requests")))))}}]),t}(a.Component),T=n(58),x=(a.Component,function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(p.a,null,o.a.createElement("div",{className:"headline"},o.a.createElement("h1",null,this.props.userName),o.a.createElement("p",null,"Share this link with your audience! : ",o.a.createElement("a",{target:"blank",href:window.location.href+"viewprofile#"+this.props.user_id},window.location.href+"viewprofile#"+this.props.user_id)))))}}]),t}(a.Component)),C=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={loadingContent:!0,loadingIndex:0,unfinishedRequests:0,data:!1},n.youtubeLoaded=function(){console.log("youtube iframe api loaded"),n.setState({loadingContent:!1})},n.loadYoutube=function(){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api",window.onYouTubeIframeAPIReady=n.youtubeLoaded;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)},n.parseVideoRequests=function(e){return e.map((function(e){return JSON.parse(e)}))},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.data;this.loadYoutube(),e.videorequests=this.parseVideoRequests(this.props.data.videorequests),console.log(e,"parsed data"),this.setState({data:e})}},{key:"render",value:function(){var e=this.state.data;return this.state.loadingContent?o.a.createElement("div",null,o.a.createElement(p.a,null,o.a.createElement("div",{className:"headline"},o.a.createElement("h1",null,"Loading..."),o.a.createElement("p",null,"loading info..."))),o.a.createElement("div",{style:{paddingLeft:"50%",width:"100%"}},o.a.createElement(f.a,{animation:"border"}))):o.a.createElement("div",null,o.a.createElement(g.a,{fluid:!0},o.a.createElement(v.a,null,o.a.createElement(y.a,null,o.a.createElement(x,{userName:e.username,user_id:e.user_id}))),o.a.createElement(v.a,null,o.a.createElement(y.a,null,o.a.createElement(S,{unfulfilledRequestsAmount:this.state.data.requestsAmount-this.state.data.fulfilledRequestsAmount,fulfilledRequestsAmount:this.state.data.fulfilledRequestsAmount,requestsAmount:this.state.data.requestsAmount})),this.state.data.videorequests.map((function(e){return o.a.createElement(y.a,null," ",o.a.createElement(j,{key:e.request_id,requestId:e.request_id,description:e.description,title:e.title,videoId:e.video_id}))})))))}}]),t}(a.Component),A=(n(46),function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={isLoading:!1,loggedIn:!1,errorInfo:"",data:!1},n.logIn=function(e){n.setState({isLoading:!0});var t=e.tokenId;fetch("https://requstenator-server.herokuapp.com/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token_id:t})}).then((function(e){200===e.status?e.json().then((function(e){n.setState({loggedIn:!0,data:e}),window.localStorage.setItem("token_id",t)})):201===e.status?e.json().then((function(e){console.log(e),n.setState({loggedIn:!0,data:e}),window.localStorage.setItem("token_id",t)})):(console.log("no bueno status is not 200 ok"),n.setState({errorInfo:"Something went wrong while signin in"}))})).catch((function(e){console.log(e),n.setState({errorInfo:"Couldn't connect to the server"}),console.log("yo man, there is an error connecting to server")})).finally((function(){n.setState({isLoading:!1})}))},n.logInFailure=function(){console.log("failed to log in")},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.state.loggedIn?this.state.loggedIn?o.a.createElement("div",null,o.a.createElement(C,{data:this.state.data})):void 0:o.a.createElement("div",{style:{textAlign:"center",marginTop:"290px"}},o.a.createElement("h1",{className:"intro-headline"},"Hey youtuber!"),o.a.createElement("p",{className:"intro-text"},"Create youtube videos based on audience suggestions!"),o.a.createElement(p.a,{className:"intro-slider"},o.a.createElement("div",{className:"intro-slider-content"},o.a.createElement("p",null,"Sign in with your google account!"),o.a.createElement("p",null,o.a.createElement(h,{isLoading:this.state.isLoading,logInFailure:this.logInFailure,logIn:this.logIn})),o.a.createElement("p",{style:{color:"red"}},this.state.errorInfo))))}}]),t}(a.Component)),N=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={loading:!1,title:"",description:"",infoMessage:""},n.createVideoRequest=function(e,t){fetch("https://requstenator-server.herokuapp.com/createrequest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:n.props.userId,title:e,description:t})}).then((function(a){201===a.status?(console.log("created a new video request"),n.setState({infoMessage:"Video requested"}),n.props.createVideoRequest(e,t)):(console.log("something went wrong with requesting video"),n.setState({infoMessage:"Connection error"}))}))},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.title,a=t.description;return o.a.createElement("div",null,o.a.createElement(E.a,{style:{width:"22rem",margin:"auto",marginTop:"25px"}},o.a.createElement(E.a.Body,null,o.a.createElement(E.a.Title,null,o.a.createElement("input",{disabled:this.state.loading,onChange:function(t){e.setState({title:t.currentTarget.value})},value:n,type:"text",placeholder:"Title",maxLength:"35"})),o.a.createElement(E.a.Text,null,o.a.createElement("textarea",{disabled:this.state.loading,onChange:function(t){e.setState({description:t.currentTarget.value})},value:a,maxLength:"854",style:{resize:"none"},rows:"14.5",cols:"40",placeholder:"Write a description of the video you want"})),o.a.createElement(R.a,{onClick:function(){e.createVideoRequest(n,a)},disabled:this.state.loading,variant:"primary"},this.state.loading?o.a.createElement(f.a,{animation:"border"}):"Request video"),o.a.createElement("p",{style:{float:"right",color:"red"}},this.state.errorMessage))))}}]),t}(a.Component),L=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={renderedRequests:[],requestPrice:"Free",totalRequests:25,unfinishedRequests:0,creatingVideoRequest:!1,data:!1,userId:"",loadingProfile:!1,profileFound:!1},n.createVideoRequest=function(e,t){var a=n.state.data,o={title:e,description:t};a.videoRequests.push(o),n.setState({data:a}),console.log("send video request to backend "),console.log(e,t)},n.getProfile=function(e){console.log("am i happeninig?"),fetch("https://requstenator-server.herokuapp.com/".concat(e)).then((function(t){200===t.status?t.json().then((function(t){n.setState({data:t,profileFound:!0,userId:e})})):console.log("something went wrong")}))},n.youtubeLoaded=function(){console.log("youtube iframe api loaded");var e=window.location.hash.slice(1);n.getProfile(e)},n.loadYoutube=function(){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api",window.onYouTubeIframeAPIReady=n.youtubeLoaded;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.loadYoutube()}},{key:"render",value:function(){var e=this,t=this.state,n=t.loadingProfile,a=(t.data,t.profileFound);if(n)return o.a.createElement("div",null,o.a.createElement(p.a,null,o.a.createElement("div",{className:"headline"},o.a.createElement("h1",null,"Loading..."),o.a.createElement("p",null,"loading info..."))),o.a.createElement("div",{style:{paddingLeft:"50%",width:"100%"}},o.a.createElement(f.a,{animation:"border"})));if(a){var l=this.state.data;return o.a.createElement("div",null,o.a.createElement(g.a,{fluid:!0},o.a.createElement(v.a,null,o.a.createElement(y.a,null,o.a.createElement(p.a,null,o.a.createElement("div",{className:"headline"},o.a.createElement("h1",null,l.userName),o.a.createElement("p",null,"give youtube video ideas to ",l.userName))))),o.a.createElement(v.a,null,o.a.createElement(y.a,null,o.a.createElement(S,{requestsAmount:l.requestsAmount,unfulfilledRequestsAmount:l.unfilledRequests})),this.state.data.videoRequests.map((function(t){return o.a.createElement(y.a,null," ",o.a.createElement(j,{componentRendered:e.componentRendered,viewOnly:!0,description:t.description,title:t.title,videoId:t.video_id}))})),o.a.createElement(y.a,null,o.a.createElement(N,{createVideoRequest:this.createVideoRequest,userId:this.state.userId})))))}return o.a.createElement("div",null,o.a.createElement(p.a,null,o.a.createElement("div",{className:"headline"},o.a.createElement("h1",null,"Not found"),o.a.createElement("p",null,"Profile with that name was not found"))))}}]),t}(a.Component);var P=function(){return window.location.href.includes("viewprofile")?o.a.createElement(L,null):o.a.createElement(A,null)};i.a.render(o.a.createElement(P,null),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.363baf4a.chunk.js.map